import { CalendarDateFormatter } from 'angular-calendar';
import { DAYS_IN_WEEK } from '../utils/calendar-scheduler-utils';
export class SchedulerDateFormatter extends CalendarDateFormatter {
    /**
     * The time formatting down the left hand side of the day view
     */
    dayViewHour({ date, locale }) {
        return new Intl.DateTimeFormat(locale, { hour: 'numeric', minute: 'numeric' }).format(date);
    }
    weekViewTitle({ dateAdapter, date, locale, weekStartsOn, excludeDays, daysInWeek, startsWithToday }) {
        // http://generatedcontent.org/post/59403168016/esintlapi
        const year = new Intl.DateTimeFormat(locale, { year: 'numeric' }).format(date);
        const month = new Intl.DateTimeFormat(locale, { month: 'short' }).format(date);
        const dateInner = startsWithToday || daysInWeek < DAYS_IN_WEEK
            ? date
            : dateAdapter.startOfWeek(date, { weekStartsOn: weekStartsOn });
        // var firstDay: number = date.getDate() - date.getDay() + 1; // First day is the day of the month - the day of the week
        let firstDay = dateInner.getDate();
        while (excludeDays.includes(firstDay)) {
            firstDay += 1;
        }
        let lastDay = firstDay + (daysInWeek - 1); // last day is the first day + (daysInWeek - 1)
        while (excludeDays.includes(lastDay)) {
            lastDay += 1;
        }
        let firstDayMonth = month;
        let lastDayMonth = month;
        let firstDayYear = year;
        let lastDayYear = year;
        if (firstDay < 1) {
            const prevMonthDate = new Date(dateInner.getFullYear(), dateInner.getMonth() - 1);
            firstDayMonth = new Intl.DateTimeFormat(locale, { month: 'short' }).format(prevMonthDate);
            const daysInPrevMonth = this.daysInMonth(prevMonthDate);
            let i = 0;
            let prevMonthDay = daysInPrevMonth;
            for (i = 0; i < Math.abs(firstDay); i++) {
                prevMonthDay--;
            }
            firstDay = prevMonthDay;
            const prevMonthYear = new Intl.DateTimeFormat(locale, { year: 'numeric' }).format(prevMonthDate);
            if (Number(prevMonthYear) < Number(year)) {
                firstDayYear = prevMonthYear;
            }
        }
        const daysInMonth = this.daysInMonth(dateInner);
        if (lastDay > daysInMonth) {
            const nextMonthDate = new Date(dateInner.getFullYear(), dateInner.getMonth() + 1);
            lastDayMonth = new Intl.DateTimeFormat(locale, { month: 'short' }).format(nextMonthDate);
            let i = 0;
            let nextMonthDay = 0;
            for (i = 0; i < (lastDay - daysInMonth); i++) {
                nextMonthDay++;
            }
            lastDay = nextMonthDay;
            const nextMonthYear = new Intl.DateTimeFormat(locale, { year: 'numeric' }).format(nextMonthDate);
            if (Number(nextMonthYear) > Number(year)) {
                lastDayYear = nextMonthYear;
            }
        }
        return `${firstDay}` + (firstDayMonth !== lastDayMonth || lastDay === firstDay ? ' ' + firstDayMonth : '') +
            (firstDayYear !== lastDayYear ? ' ' + firstDayYear : '') +
            (lastDay === firstDay ? '' : ` - ${lastDay} ${lastDayMonth} ${lastDayYear}`);
    }
    daysInMonth(anyDateInMonth) {
        return new Date(anyDateInMonth.getFullYear(), anyDateInMonth.getMonth() + 1, 0).getDate();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZWR1bGVyLWRhdGUtZm9ybWF0dGVyLnByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhci1jYWxlbmRhci1zY2hlZHVsZXIvIiwic291cmNlcyI6WyJtb2R1bGVzL3NjaGVkdWxlci9mb3JtYXR0ZXJzL3NjaGVkdWxlci1kYXRlLWZvcm1hdHRlci5wcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUscUJBQXFCLEVBQW9DLE1BQU0sa0JBQWtCLENBQUM7QUFDM0YsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBT2pFLE1BQU0sT0FBTyxzQkFBdUIsU0FBUSxxQkFBcUI7SUFFN0Q7O09BRUc7SUFDSSxXQUFXLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFnQztRQUM3RCxPQUFPLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoRyxDQUFDO0lBRU0sYUFBYSxDQUFDLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFnQztRQUNwSSx5REFBeUQ7UUFDekQsTUFBTSxJQUFJLEdBQVcsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2RixNQUFNLEtBQUssR0FBVyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXZGLE1BQU0sU0FBUyxHQUFTLGVBQWUsSUFBSSxVQUFVLEdBQUcs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RUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUN6RyxJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3RDLFdBQVcsR0FBRyxhQUFhLENBQUM7YUFDL0I7U0FDSjtRQUVELE9BQU8sR0FBRyxRQUFRLEVBQUUsR0FBRyxDQUFDLGFBQWEsS0FBSyxZQUFZLElBQUksT0FBTyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3RHLENBQUMsWUFBWSxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3hELENBQUMsT0FBTyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLE9BQU8sSUFBSSxZQUFZLElBQUksV0FBVyxFQUFFLENBQUMsQ0FBQztJQUNyRixDQUFDO0lBRU8sV0FBVyxDQUFDLGNBQW9CO1FBQ3BDLE9BQU8sSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxFQUFFLGNBQWMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDOUYsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FsZW5kYXJEYXRlRm9ybWF0dGVyLCBEYXRlRm9ybWF0dGVyUGFyYW1zLCBEYXRlQWRhcHRlciB9IGZyb20gJ2FuZ3VsYXItY2FsZW5kYXInO1xyXG5pbXBvcnQgeyBEQVlTX0lOX1dFRUsgfSBmcm9tICcuLi91dGlscy9jYWxlbmRhci1zY2hlZHVsZXItdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTY2hlZHVsZXJEYXRlRm9ybWF0dGVyUGFyYW1zIGV4dGVuZHMgRGF0ZUZvcm1hdHRlclBhcmFtcyB7XHJcbiAgICBkYXRlQWRhcHRlcjogRGF0ZUFkYXB0ZXI7XHJcbiAgICBzdGFydHNXaXRoVG9kYXk6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTY2hlZHVsZXJEYXRlRm9ybWF0dGVyIGV4dGVuZHMgQ2FsZW5kYXJEYXRlRm9ybWF0dGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0aW1lIGZvcm1hdHRpbmcgZG93biB0aGUgbGVmdCBoYW5kIHNpZGUgb2YgdGhlIGRheSB2aWV3XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkYXlWaWV3SG91cih7IGRhdGUsIGxvY2FsZSB9OiBTY2hlZHVsZXJEYXRlRm9ybWF0dGVyUGFyYW1zKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCB7IGhvdXI6ICdudW1lcmljJywgbWludXRlOiAnbnVtZXJpYycgfSkuZm9ybWF0KGRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB3ZWVrVmlld1RpdGxlKHsgZGF0ZUFkYXB0ZXIsIGRhdGUsIGxvY2FsZSwgd2Vla1N0YXJ0c09uLCBleGNsdWRlRGF5cywgZGF5c0luV2Vlaywgc3RhcnRzV2l0aFRvZGF5IH06IFNjaGVkdWxlckRhdGVGb3JtYXR0ZXJQYXJhbXMpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIGh0dHA6Ly9nZW5lcmF0ZWRjb250ZW50Lm9yZy9wb3N0LzU5NDAzMTY4MDE2L2VzaW50bGFwaVxyXG4gICAgICAgIGNvbnN0IHllYXI6IHN0cmluZyA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgeyB5ZWFyOiAnbnVtZXJpYycgfSkuZm9ybWF0KGRhdGUpO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoOiBzdHJpbmcgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NhbGUsIHsgbW9udGg6ICdzaG9ydCcgfSkuZm9ybWF0KGRhdGUpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRlSW5uZXI6IERhdGUgPSBzdGFydHNXaXRoVG9kYXkgfHwgZGF5c0luV2VlayA8IERBWVNfSU5fV0VFS1xyXG4gICAgICAgICAgICA/IGRhdGVcclxuICAgICAgICAgICAgOiBkYXRlQWRhcHRlci5zdGFydE9mV2VlayhkYXRlLCB7IHdlZWtTdGFydHNPbjogd2Vla1N0YXJ0c09uIH0pO1xyXG5cclxuICAgICAgICAvLyB2YXIgZmlyc3REYXk6IG51bWJlciA9IGRhdGUuZ2V0RGF0ZSgpIC0gZGF0ZS5nZXREYXkoKSArIDE7IC8vIEZpcnN0IGRheSBpcyB0aGUgZGF5IG9mIHRoZSBtb250aCAtIHRoZSBkYXkgb2YgdGhlIHdlZWtcclxuICAgICAgICBsZXQgZmlyc3REYXk6IG51bWJlciA9IGRhdGVJbm5lci5nZXREYXRlKCk7XHJcbiAgICAgICAgd2hpbGUgKGV4Y2x1ZGVEYXlzLmluY2x1ZGVzKGZpcnN0RGF5KSkge1xyXG4gICAgICAgICAgICBmaXJzdERheSArPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxhc3REYXk6IG51bWJlciA9IGZpcnN0RGF5ICsgKGRheXNJbldlZWsgLSAxKTsgLy8gbGFzdCBkYXkgaXMgdGhlIGZpcnN0IGRheSArIChkYXlzSW5XZWVrIC0gMSlcclxuICAgICAgICB3aGlsZSAoZXhjbHVkZURheXMuaW5jbHVkZXMobGFzdERheSkpIHtcclxuICAgICAgICAgICAgbGFzdERheSArPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpcnN0RGF5TW9udGg6IHN0cmluZyA9IG1vbnRoO1xyXG4gICAgICAgIGxldCBsYXN0RGF5TW9udGg6IHN0cmluZyA9IG1vbnRoO1xyXG5cclxuICAgICAgICBsZXQgZmlyc3REYXlZZWFyOiBzdHJpbmcgPSB5ZWFyO1xyXG4gICAgICAgIGxldCBsYXN0RGF5WWVhcjogc3RyaW5nID0geWVhcjtcclxuXHJcbiAgICAgICAgaWYgKGZpcnN0RGF5IDwgMSkge1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2TW9udGhEYXRlOiBEYXRlID0gbmV3IERhdGUoZGF0ZUlubmVyLmdldEZ1bGxZZWFyKCksIGRhdGVJbm5lci5nZXRNb250aCgpIC0gMSk7XHJcbiAgICAgICAgICAgIGZpcnN0RGF5TW9udGggPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NhbGUsIHsgbW9udGg6ICdzaG9ydCcgfSkuZm9ybWF0KHByZXZNb250aERhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXlzSW5QcmV2TW9udGg6IG51bWJlciA9IHRoaXMuZGF5c0luTW9udGgocHJldk1vbnRoRGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgaTogbnVtYmVyID0gMDtcclxuICAgICAgICAgICAgbGV0IHByZXZNb250aERheTogbnVtYmVyID0gZGF5c0luUHJldk1vbnRoO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgTWF0aC5hYnMoZmlyc3REYXkpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHByZXZNb250aERheS0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpcnN0RGF5ID0gcHJldk1vbnRoRGF5O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJldk1vbnRoWWVhcjogc3RyaW5nID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCB7IHllYXI6ICdudW1lcmljJyB9KS5mb3JtYXQocHJldk1vbnRoRGF0ZSk7XHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIocHJldk1vbnRoWWVhcikgPCBOdW1iZXIoeWVhcikpIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0RGF5WWVhciA9IHByZXZNb250aFllYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRheXNJbk1vbnRoOiBudW1iZXIgPSB0aGlzLmRheXNJbk1vbnRoKGRhdGVJbm5lcik7XHJcbiAgICAgICAgaWYgKGxhc3REYXkgPiBkYXlzSW5Nb250aCkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0TW9udGhEYXRlOiBEYXRlID0gbmV3IERhdGUoZGF0ZUlubmVyLmdldEZ1bGxZZWFyKCksIGRhdGVJbm5lci5nZXRNb250aCgpICsgMSk7XHJcbiAgICAgICAgICAgIGxhc3REYXlNb250aCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgeyBtb250aDogJ3Nob3J0JyB9KS5mb3JtYXQobmV4dE1vbnRoRGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgaTogbnVtYmVyID0gMDtcclxuICAgICAgICAgICAgbGV0IG5leHRNb250aERheTogbnVtYmVyID0gMDtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IChsYXN0RGF5IC0gZGF5c0luTW9udGgpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG5leHRNb250aERheSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxhc3REYXkgPSBuZXh0TW9udGhEYXk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuZXh0TW9udGhZZWFyOiBzdHJpbmcgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NhbGUsIHsgeWVhcjogJ251bWVyaWMnIH0pLmZvcm1hdChuZXh0TW9udGhEYXRlKTtcclxuICAgICAgICAgICAgaWYgKE51bWJlcihuZXh0TW9udGhZZWFyKSA+IE51bWJlcih5ZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgbGFzdERheVllYXIgPSBuZXh0TW9udGhZZWFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYCR7Zmlyc3REYXl9YCArIChmaXJzdERheU1vbnRoICE9PSBsYXN0RGF5TW9udGggfHwgbGFzdERheSA9PT0gZmlyc3REYXkgPyAnICcgKyBmaXJzdERheU1vbnRoIDogJycpICtcclxuICAgICAgICAgICAgKGZpcnN0RGF5WWVhciAhPT0gbGFzdERheVllYXIgPyAnICcgKyBmaXJzdERheVllYXIgOiAnJykgK1xyXG4gICAgICAgICAgICAobGFzdERheSA9PT0gZmlyc3REYXkgPyAnJyA6IGAgLSAke2xhc3REYXl9ICR7bGFzdERheU1vbnRofSAke2xhc3REYXlZZWFyfWApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGF5c0luTW9udGgoYW55RGF0ZUluTW9udGg6IERhdGUpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShhbnlEYXRlSW5Nb250aC5nZXRGdWxsWWVhcigpLCBhbnlEYXRlSW5Nb250aC5nZXRNb250aCgpICsgMSwgMCkuZ2V0RGF0ZSgpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==